\hypertarget{_reset_password_8cshtml_8cs_source}{}\doxysection{Reset\+Password.\+cshtml.\+cs}
\label{_reset_password_8cshtml_8cs_source}\index{C:/Users/Danilo/source/repos/FreebirdTech/Areas/Identity/Pages/Account/ResetPassword.cshtml.cs@{C:/Users/Danilo/source/repos/FreebirdTech/Areas/Identity/Pages/Account/ResetPassword.cshtml.cs}}
\mbox{\hyperlink{_reset_password_8cshtml_8cs}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00001}00001 \textcolor{keyword}{using} System;}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00002}00002 \textcolor{keyword}{using} System.Collections.Generic;}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00003}00003 \textcolor{keyword}{using} System.ComponentModel.DataAnnotations;}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00004}00004 \textcolor{keyword}{using} System.Linq;}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00005}00005 \textcolor{keyword}{using} System.Text;}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00006}00006 \textcolor{keyword}{using} System.Threading.Tasks;}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00007}00007 \textcolor{keyword}{using} Microsoft.AspNetCore.Authorization;}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00008}00008 \textcolor{keyword}{using} Microsoft.AspNetCore.Identity;}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00009}00009 \textcolor{keyword}{using} Microsoft.AspNetCore.Mvc;}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00010}00010 \textcolor{keyword}{using} Microsoft.AspNetCore.Mvc.RazorPages;}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00011}00011 \textcolor{keyword}{using} Microsoft.AspNetCore.WebUtilities;}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00012}00012 }
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00013}00013 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespace_freebird_tech_1_1_areas_1_1_identity_1_1_pages_1_1_account}{FreebirdTech.Areas.Identity.Pages.Account}}}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00014}00014 \{}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00015}00015     [AllowAnonymous]}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00016}\mbox{\hyperlink{class_freebird_tech_1_1_areas_1_1_identity_1_1_pages_1_1_account_1_1_reset_password_model}{00016}}     \textcolor{keyword}{public} \textcolor{keyword}{class }\mbox{\hyperlink{class_freebird_tech_1_1_areas_1_1_identity_1_1_pages_1_1_account_1_1_reset_password_model}{ResetPasswordModel}} : PageModel}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00017}00017     \{}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00018}00018         \textcolor{keyword}{private} readonly UserManager<IdentityUser> \_userManager;}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00019}00019 }
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00020}\mbox{\hyperlink{class_freebird_tech_1_1_areas_1_1_identity_1_1_pages_1_1_account_1_1_reset_password_model_a0b293329bfd9286d80ed18f7ce26669c}{00020}}         \textcolor{keyword}{public} \mbox{\hyperlink{class_freebird_tech_1_1_areas_1_1_identity_1_1_pages_1_1_account_1_1_reset_password_model_a0b293329bfd9286d80ed18f7ce26669c}{ResetPasswordModel}}(UserManager<IdentityUser> userManager)}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00021}00021         \{}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00022}00022             \_userManager = userManager;}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00023}00023         \}}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00024}00024 }
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00025}00025         [BindProperty]}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00026}\mbox{\hyperlink{class_freebird_tech_1_1_areas_1_1_identity_1_1_pages_1_1_account_1_1_reset_password_model_ad0384f85bb7222e1c6fe0d56817b3c9e}{00026}}         \textcolor{keyword}{public} \mbox{\hyperlink{class_freebird_tech_1_1_areas_1_1_identity_1_1_pages_1_1_account_1_1_reset_password_model_1_1_input_model}{InputModel}} \mbox{\hyperlink{class_freebird_tech_1_1_areas_1_1_identity_1_1_pages_1_1_account_1_1_reset_password_model_ad0384f85bb7222e1c6fe0d56817b3c9e}{Input}} \{ \textcolor{keyword}{get}; \textcolor{keyword}{set}; \}}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00027}00027 }
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00028}\mbox{\hyperlink{class_freebird_tech_1_1_areas_1_1_identity_1_1_pages_1_1_account_1_1_reset_password_model_1_1_input_model}{00028}}         \textcolor{keyword}{public} \textcolor{keyword}{class }\mbox{\hyperlink{class_freebird_tech_1_1_areas_1_1_identity_1_1_pages_1_1_account_1_1_reset_password_model_1_1_input_model}{InputModel}}}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00029}00029         \{}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00030}00030             [Required]}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00031}00031             [EmailAddress]}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00032}\mbox{\hyperlink{class_freebird_tech_1_1_areas_1_1_identity_1_1_pages_1_1_account_1_1_reset_password_model_1_1_input_model_aff90d165b7658e6b691bc3b3c74b2775}{00032}}             \textcolor{keyword}{public} \textcolor{keywordtype}{string} \mbox{\hyperlink{class_freebird_tech_1_1_areas_1_1_identity_1_1_pages_1_1_account_1_1_reset_password_model_1_1_input_model_aff90d165b7658e6b691bc3b3c74b2775}{Email}} \{ \textcolor{keyword}{get}; \textcolor{keyword}{set}; \}}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00033}00033 }
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00034}00034             [Required]}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00035}00035             [StringLength(100, ErrorMessage = \textcolor{stringliteral}{"{}The \{0\} must be at least \{2\} and at max \{1\} characters long."{}}, MinimumLength = 6)]}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00036}00036             [DataType(DataType.Password)]}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00037}\mbox{\hyperlink{class_freebird_tech_1_1_areas_1_1_identity_1_1_pages_1_1_account_1_1_reset_password_model_1_1_input_model_abc0a246388bc6aff2a14c146512c7d35}{00037}}             \textcolor{keyword}{public} \textcolor{keywordtype}{string} \mbox{\hyperlink{class_freebird_tech_1_1_areas_1_1_identity_1_1_pages_1_1_account_1_1_reset_password_model_1_1_input_model_abc0a246388bc6aff2a14c146512c7d35}{Password}} \{ \textcolor{keyword}{get}; \textcolor{keyword}{set}; \}}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00038}00038 }
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00039}00039             [DataType(DataType.Password)]}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00040}00040             [Display(Name = \textcolor{stringliteral}{"{}Confirm password"{}})]}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00041}00041             [Compare(\textcolor{stringliteral}{"{}Password"{}}, ErrorMessage = \textcolor{stringliteral}{"{}The password and confirmation password do not match."{}})]}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00042}\mbox{\hyperlink{class_freebird_tech_1_1_areas_1_1_identity_1_1_pages_1_1_account_1_1_reset_password_model_1_1_input_model_a49bf3cfd37c61045996cb0d368ed567a}{00042}}             \textcolor{keyword}{public} \textcolor{keywordtype}{string} \mbox{\hyperlink{class_freebird_tech_1_1_areas_1_1_identity_1_1_pages_1_1_account_1_1_reset_password_model_1_1_input_model_a49bf3cfd37c61045996cb0d368ed567a}{ConfirmPassword}} \{ \textcolor{keyword}{get}; \textcolor{keyword}{set}; \}}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00043}00043 }
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00044}\mbox{\hyperlink{class_freebird_tech_1_1_areas_1_1_identity_1_1_pages_1_1_account_1_1_reset_password_model_1_1_input_model_a5a8d07d8839f298c75a765fd6c9c7017}{00044}}             \textcolor{keyword}{public} \textcolor{keywordtype}{string} \mbox{\hyperlink{class_freebird_tech_1_1_areas_1_1_identity_1_1_pages_1_1_account_1_1_reset_password_model_1_1_input_model_a5a8d07d8839f298c75a765fd6c9c7017}{Code}} \{ \textcolor{keyword}{get}; \textcolor{keyword}{set}; \}}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00045}00045         \}}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00046}00046 }
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00047}\mbox{\hyperlink{class_freebird_tech_1_1_areas_1_1_identity_1_1_pages_1_1_account_1_1_reset_password_model_a633c0fc374d73b0cdf65aef1016d1281}{00047}}         \textcolor{keyword}{public} IActionResult \mbox{\hyperlink{class_freebird_tech_1_1_areas_1_1_identity_1_1_pages_1_1_account_1_1_reset_password_model_a633c0fc374d73b0cdf65aef1016d1281}{OnGet}}(\textcolor{keywordtype}{string} code = \textcolor{keyword}{null})}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00048}00048         \{}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00049}00049             \textcolor{keywordflow}{if} (code == \textcolor{keyword}{null})}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00050}00050             \{}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00051}00051                 \textcolor{keywordflow}{return} BadRequest(\textcolor{stringliteral}{"{}A code must be supplied for password reset."{}});}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00052}00052             \}}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00053}00053             \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00054}00054             \{}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00055}00055                 \mbox{\hyperlink{class_freebird_tech_1_1_areas_1_1_identity_1_1_pages_1_1_account_1_1_reset_password_model_ad0384f85bb7222e1c6fe0d56817b3c9e}{Input}} = \textcolor{keyword}{new} \mbox{\hyperlink{class_freebird_tech_1_1_areas_1_1_identity_1_1_pages_1_1_account_1_1_reset_password_model_1_1_input_model}{InputModel}}}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00056}00056                 \{}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00057}00057                     Code = Encoding.UTF8.GetString(WebEncoders.Base64UrlDecode(code))}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00058}00058                 \};}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00059}00059                 \textcolor{keywordflow}{return} Page();}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00060}00060             \}}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00061}00061         \}}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00062}00062 }
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00063}\mbox{\hyperlink{class_freebird_tech_1_1_areas_1_1_identity_1_1_pages_1_1_account_1_1_reset_password_model_acbf204deb8613d3e0cfae7b4615a0075}{00063}}         \textcolor{keyword}{public} async Task<IActionResult> \mbox{\hyperlink{class_freebird_tech_1_1_areas_1_1_identity_1_1_pages_1_1_account_1_1_reset_password_model_acbf204deb8613d3e0cfae7b4615a0075}{OnPostAsync}}()}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00064}00064         \{}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00065}00065             \textcolor{keywordflow}{if} (!ModelState.IsValid)}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00066}00066             \{}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00067}00067                 \textcolor{keywordflow}{return} Page();}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00068}00068             \}}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00069}00069 }
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00070}00070             var user = await \_userManager.FindByEmailAsync(\mbox{\hyperlink{class_freebird_tech_1_1_areas_1_1_identity_1_1_pages_1_1_account_1_1_reset_password_model_ad0384f85bb7222e1c6fe0d56817b3c9e}{Input}}.\mbox{\hyperlink{class_freebird_tech_1_1_areas_1_1_identity_1_1_pages_1_1_account_1_1_reset_password_model_1_1_input_model_aff90d165b7658e6b691bc3b3c74b2775}{Email}});}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00071}00071             \textcolor{keywordflow}{if} (user == \textcolor{keyword}{null})}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00072}00072             \{}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00073}00073                 \textcolor{comment}{// Don't reveal that the user does not exist}}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00074}00074                 \textcolor{keywordflow}{return} RedirectToPage(\textcolor{stringliteral}{"{}./ResetPasswordConfirmation"{}});}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00075}00075             \}}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00076}00076 }
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00077}00077             var result = await \_userManager.ResetPasswordAsync(user, \mbox{\hyperlink{class_freebird_tech_1_1_areas_1_1_identity_1_1_pages_1_1_account_1_1_reset_password_model_ad0384f85bb7222e1c6fe0d56817b3c9e}{Input}}.\mbox{\hyperlink{class_freebird_tech_1_1_areas_1_1_identity_1_1_pages_1_1_account_1_1_reset_password_model_1_1_input_model_a5a8d07d8839f298c75a765fd6c9c7017}{Code}}, \mbox{\hyperlink{class_freebird_tech_1_1_areas_1_1_identity_1_1_pages_1_1_account_1_1_reset_password_model_ad0384f85bb7222e1c6fe0d56817b3c9e}{Input}}.\mbox{\hyperlink{class_freebird_tech_1_1_areas_1_1_identity_1_1_pages_1_1_account_1_1_reset_password_model_1_1_input_model_abc0a246388bc6aff2a14c146512c7d35}{Password}});}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00078}00078             \textcolor{keywordflow}{if} (result.Succeeded)}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00079}00079             \{}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00080}00080                 \textcolor{keywordflow}{return} RedirectToPage(\textcolor{stringliteral}{"{}./ResetPasswordConfirmation"{}});}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00081}00081             \}}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00082}00082 }
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00083}00083             \textcolor{keywordflow}{foreach} (var error \textcolor{keywordflow}{in} result.Errors)}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00084}00084             \{}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00085}00085                 ModelState.AddModelError(\textcolor{keywordtype}{string}.Empty, error.Description);}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00086}00086             \}}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00087}00087             \textcolor{keywordflow}{return} Page();}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00088}00088         \}}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00089}00089     \}}
\DoxyCodeLine{\Hypertarget{_reset_password_8cshtml_8cs_source_l00090}00090 \}}

\end{DoxyCode}
